Non Verbal Behavior Generator 
=====

NVBG (Non Verbal Behavior Generator) has been merged to GRETA to allow the latter to perform gestures computed by NVBG. NVBG work with a software named SmartBody to perform the gesture that it has found.

Plenty of these gesture have been created also in GRETA to perform a map from NVBG Gesture and the GRETA Gesture using a mapping file

NVBG Traitement is located in two different place:

* Planner
* BML File Reader

In this way, GRETA will use be able to add the gestures found thanks NVBG to those found by the lecture of the FML or the BML.
NVBG will generate a new BML file for the FML and BML with only the gesture found by itself in this way it's easy to look at  what it has done.

NVBG needs only to know the Speech to perform its treatement. The Speech is available as a SpeechSignal  and it can be found in the list of Signals which is in both  Planner and the BML File Reader. 

The Speech is extracted from the SpeechSignal and then is modified to be understandable by NVBG as a VrExpress Message.

vrExpress Message
-----

.. image:: https://github.com/isir/greta/blob/gpl-grimaldi/pictures/vrExpress.PNG

A vrExpress Message is the way that NVBG uses to communicate between its components. One doesn't need to specify the intentions (intention tags omitted), they will be computed automatically, instead it's mandatory to define a character that will take in charge the message process (harmony in the photo).

Two characters are generated by default by NVBG: Brad and Rachel 

Launch NVBG
-----

From the Planner or the BML File Reader , GRETA will launch NVBG and the Charniak Parser 

In the run-toolkit-all.bat is specified to launch NVBG with some arguments:

* Characters that will have to process the speech
* Rules-Input file for each character (it will define how the character will treat the speech)
* NVBG-Rules.xls: it will define the structure of the response 
* NVBG-Transform.xls: used by NVBG-Rules , define the structure of the response
* NVBG-BahviorDescription.xls: used by NVBG-Rules, define the structure of the response

.. image:: https://github.com/isir/greta/blob/gpl-grimaldi/pictures/NVBG_cap.PNG

The parser is launched just after the launch of NVBG, it will parse the speech and send it ,once parsed, back to NVBG.

